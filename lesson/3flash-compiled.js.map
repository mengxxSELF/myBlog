{"version":3,"sources":["3flash.js"],"names":[],"mappings":"AAAA,IAAI,UAAU,QAAQ,SAAR,CAAd;AACA,IAAI,UAAU,QAAQ,iBAAR,CAAd;AACA,IAAI,QAAQ,QAAQ,OAAR,CAAZ;AACA,IAAI,MAAK,SAAT;AACA;;AAEA;;;;;;;;;AASA;AACA,IAAI,GAAJ,CAAQ,UAAU,GAAV,EAAc,GAAd,EAAkB,IAAlB,EAAwB;AAC5B,QAAI,KAAJ,GAAa,UAAU,IAAV,EAAe,GAAf,EAAoB;AAC7B;AACA,YAAG,GAAH,EAAO;AAAG;AACN,gBAAI,UAAY,IAAI,OAAJ,CAAY,IAAZ,CAAhB;AACA;AACA,gBAAG,OAAH,EAAW;AACP,wBAAQ,IAAR,CAAa,GAAb;AACH,aAFD,MAEK;AACD,oBAAI,OAAJ,CAAY,IAAZ,IAAoB,GAApB;AACH;AACJ,SARD,MAQK;AACD;AACD;AACC,gBAAI,UAAY,IAAI,OAAJ,CAAY,IAAZ,CAAhB;AACA,mBAAS,IAAI,OAAJ,CAAY,IAAZ,CAAT,CAJC,CAI4B;AAC7B,mBAAO,OAAP;AACH;AACJ,KAjBD;AAkBA;AACH,CApBD;;AAwBA,IAAI,GAAJ,CAAQ,IAAR,EAAc,UAAU,GAAV,EAAc,GAAd,EAAmB;AAC7B,QAAI,KAAJ,CAAU,IAAV,EAAe,KAAf;AACA,QAAI,QAAJ,CAAa,IAAb;AACH,CAHD;AAIA,IAAI,GAAJ,CAAQ,IAAR,EAAc,UAAU,GAAV,EAAc,GAAd,EAAmB;AAC7B,QAAI,KAAJ,CAAU,IAAV;AACA,QAAI,IAAJ,CAAS,KAAT;AACH,CAHD;;AAKA,IAAI,MAAJ,CAAW,IAAX","file":"3flash-compiled.js","sourcesContent":["var express = require('express');\r\nvar session=  require('express-session')\r\nvar flash=  require('flash');\r\nvar app =express();\r\n//app.use(flash());\r\n\r\n/*\r\n*  req.flash('success','su1')  ����Ϣд��session����\r\n*\r\n*\r\n*  req.flash('success')  һ������ ȡһ����Ϣ  ������������  ��������д�˼��� һ�ζ�����\r\n*\r\n*  ������֮�� ������\r\n* */\r\n\r\n/*  �Լ�ʵ��flash ����*/\r\napp.use(function (req,res,next) {\r\n    req.flash =  function (type,mes) {\r\n        /*  ���԰������ͽ����������ۼ�  ��ͬ���Ͳ�ͬ����  */\r\n        if(mes){  /* ��mes  ��ֵ  ��������*/\r\n            var message =   req.session[type];\r\n            /* �ж��Ƿ��д� ����   */\r\n            if(message){\r\n                message.push(mes)\r\n            }else{\r\n                req.session[type] = mes;\r\n            }\r\n        }else{\r\n            /*  ûmes  ȡֵ*/\r\n           // return req.session[type];\r\n            var message =   req.session[type];\r\n            delete   req.session[type];  /*  flash ȡ��һ�ξͶ�������  �������� */\r\n            return message;\r\n        }\r\n    };\r\n    next();\r\n})\r\n\r\n\r\n\r\napp.get('/w', function (req,res) {\r\n    req.flash('su','111');\r\n    res.redirect('/r')\r\n})\r\napp.get('/r', function (req,res) {\r\n    req.flash('su');\r\n    res.send('got')\r\n})\r\n\r\napp.listen(5005);"]}